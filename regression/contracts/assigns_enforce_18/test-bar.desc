CORE
main.c
--dfcc main --enforce-contract bar _ --pointer-primitive-check
^\[bar.assigns.\d+\] line 17 Check that \*a is valid: SUCCESS$
^\[bar.assigns.\d+\] line 17 Check that \*b is valid: SUCCESS$
^\[bar.assigns.\d+\] line 19 Check that POINTER_OBJECT\(\(void \*\)a\) is assignable: SUCCESS$
^\[bar.assigns.\d+\] line 20 Check that \*b is assignable: SUCCESS$
^VERIFICATION SUCCESSFUL$
^EXIT=0$
^SIGNAL=0$
--
--
Checks whether contract enforcement works with functions that deallocate memory.
We had problems before when freeing a variable, but still keeping it on
the writable set, which lead to deallocated variables issues.
Now, if a memory is deallocated, we remove it from the our freely assignable set.
